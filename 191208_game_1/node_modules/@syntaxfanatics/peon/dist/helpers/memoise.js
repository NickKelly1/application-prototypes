"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @class
 * @name FnMemoMap
 */
class FnMemoMap extends Function {
    constructor(fn) {
        super();
        this.fnCache = [];
        this.invokeFn = (...args) => {
            const match = this.find(args);
            if (match)
                return match.result;
            const newResult = this.fn(...args);
            this.fnCache.push({ index: args, result: newResult });
            return newResult;
        };
        this.fn = fn;
    }
    find(args) {
        return this
            .fnCache
            .find(instance => args.length === instance.index.length
            && args.every((v, i) => v === instance.index[i]));
    }
}
/**
 * @description
 * Memoise the result of a function
 *
 * @param fn
 */
function memoise(fn) {
    const memo = new FnMemoMap(fn);
    return memo.invokeFn;
}
exports.memoise = memoise;
